<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deno vs Bun Benchmarks</title>

    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        line-height: 1.6em;
      }

      html,
      body {
        font-size: 10px;
        font-family:
          system-ui,
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          Oxygen,
          Ubuntu,
          Cantarell,
          "Open Sans",
          "Helvetica Neue",
          sans-serif;
      }

      body {
        font-size: 1.6rem;
      }

      main {
        margin: 50px auto;
        max-width: 700px;

        a {
          color: dodgerblue;
          border-bottom: 1px dashed dodgerblue;
          text-decoration: none;
          padding: 2px 0;

          &:hover {
            border-bottom-style: solid;
            border-bottom-width: 2px;
          }
        }

        .version {
          font-size: 1.5rem;
          padding: 0;
          list-style: none;
          font-weight: bold;
        }

        details {
          border: 1px solid #000;
          padding: 10px;
          font-size: 1.4rem;

          &[open] {
            summary {
              border-bottom: 1px solid #000;
            }
          }

          summary {
            margin: -10px;
            padding: 2px 10px;
            user-select: none;
            cursor: pointer;
          }

          pre {
            background: #eee;
            font-size: 1.3rem;
            padding: 5px 8px;

            &:last-child {
              margin-bottom: 0;
            }
          }
        }

        hr {
          display: block;
          width: 100%;
          height: 1px;
          background: #eee;
          margin: 20px 0;
          border: none;
        }

        .text_small {
          font-size: 1.4rem;
        }

        .benchmarks {
          .benchmark {
            padding-bottom: 3rem;
            margin-bottom: 3rem;
            border-bottom: 1px dashed #eee;

            h2 {
              margin-bottom: 0;
            }

            p {
              margin: 0;
            }

            pre {
              display: inline-block;
              padding: 1rem 2rem;
              background: #eee;
              white-space: pre-line;

              code {
                padding: 0;
                white-space: break-spaces;
                font-size: 1.3rem;
                font-weight: bold;
              }
            }

            .graph {
              .bar {
                width: 100%;
                height: 60px;
                background: #eee;
                margin: 10px 0;
                display: flex;
                align-items: center;
                padding: 5px 10px;
                border: 1px dashed #000;
                border-left: 2px solid #000;

                &::before {
                  background: rgba(255, 255, 255, 0.7);
                  padding: 1px 4px;
                  font-size: 1.3rem;
                  font-family: monospace;
                }

                &.bun {
                  background-color: #f9f1e1;

                  &::before {
                    content: "Bun";
                  }
                }

                &.deno {
                  width: 80%;
                  background-color: #70ffaf;

                  &::before {
                    content: "Deno";
                  }
                }
              }
            }
          }
        }
      }
    </style>
  </head>
  <body>
    <main>
      <header>
        <h1>Deno vs Bun Benchmarks</h1>
        <p class="text_small">
          <b>Disclaimer:</b><br>These benchmarks were made out of curiosity and most likely won't reflect<br />
          real world scenarios that your application is going to face.
        </p>
        <p class="text_small">You may notice we're focusing only on requests per second which is definitely not the only relevant metric in a benchmark. Latency, RAM & CPU usage, operational system and code architecture are other highly important variables. That's exactly why you should not use the results below as the cornerstone to a decision between Bun nor Deno, for that you should run your own benchmarks, fine tuned for your use case.</p>
        <p class="text_small">
          <em>Always take benchmarks with a grain of salt.</em>
        </p>
        <p>
          <ul class="version">
            <li>Executed at: <time>21 December 2024</time></li>
            <li>Deno version: 2.0.3</li>
            <li>Bun version: 1.2.0</li>
          </ul>
        </p>
        <p><a href="https://github.com/kazzkiq/deno-vs-bun">Source code</a></p>
        <details>
          <summary>Benchmark methodology</summary>
          <p>The benchmark runs synchronously (1 program at a time). It always runs as single core. First there is a warmup that is executed 3 times, then the real benchmark begins. All applications run on port <code>3001</code>.</p>
          <p>This benchmark uses <a href="https://github.com/hatoo/oha">oha</a> as the load testing tool.</p>
          <p>This is the warmup command (100,000 requests, 3x):</p>
          <pre><code>oha -n 100000 -c 10 --disable-compression http://localhost:3001/</code></pre>

          <p>And this is the benchmark one (10,000,000 requests @ 200 concurrency):</p>
          <pre><code>oha -n 10000000 -c 200 --disable-compression http://localhost:3001/</code></pre>

          <p>All tests are executed on a Basic Regular Droplet VPS from DigitalOcean (2vCPUs, 4GiB RAM).</p>
          <p></p>
        </details>

      </header>
      <hr />

      <section class="benchmarks">
        <!-- Sample benchmark -->
        <!-- <div class="benchmark">
          <h2>Simple HTTP server</h2>
          <p>A simple HTTP server returning a text string.</p>

          <pre>
            <code> Bun: 1,193,204 req/s (1.5x faster) or (20% faster)
Deno: 978,493 req/s</code>
          </pre>
          <div class="graph">
            <div class="bar bun"></div>
            <div class="bar deno"></div>
          </div>
          </div>
        -->
      </section>
    </main>
  </body>
</html>
